@model ECommerce_WebApp.Models.Cart
@{
    var products = ViewBag.Products as Dictionary<int, ECommerce_WebApp.Models.Product>;
}

<h2>Your Cart</h2>
<hr />

@if (Model.CartItems.Any())
{
    decimal total = 0;

    foreach (var item in Model.CartItems)
    {
        var product = products[item.ProductId];
        var price = product.Price * item.Quantity;
        total += price;

        <p>
            <strong>@product.Name</strong><br />
            Quantity: @item.Quantity<br />
            Price: @price
        </p>
        <hr />
    }

    <p>
        <strong>Total:</strong> @total
    </p>

    <form asp-controller="Order" asp-action="Checkout" method="get">
        <button type="submit">Proceed to Checkout</button>
    </form>
}
else
{
    <p>Your cart is empty.</p>
}
