@model ECommerce_WebApp.Models.Product

@{
    ViewData["Title"] = Model.Name;
}

<h1>@Model.Name</h1>

<!-- Product Image -->
@if (!string.IsNullOrEmpty(Model.ImageUrl))
{
    <img src="@Model.ImageUrl" alt="@Model.Name" width="300" />
}

<hr />

<!-- Product Details -->
<p>
    <strong>Category:</strong> @Model.Category?.Name
</p>

<p>
    <strong>Brand:</strong> @Model.Brand?.Name
</p>

<p>
    <strong>Price:</strong> @Model.Price.ToString("C")
</p>

<p>
    <strong>Description:</strong><br />
    @Model.Description
</p>

<p>
    <strong>Stock Status:</strong>
    @if (Model.StockQuantity > 0)
    {
        <span>In Stock (@Model.StockQuantity)</span>
    }
    else
    {
        <span>Out of Stock</span>
    }
</p>

<!-- Actions -->
<p>
    @if (Model.StockQuantity > 0)
    {
        <a asp-controller="Cart"
           asp-action="AddToCart"
           asp-route-productId="@Model.Id">
            Add to Cart
        </a>
    }
    else
    {
        <span>Add to Cart (Disabled)</span>
    }
</p>

<p>
    <a asp-action="Index">Back to List</a>
</p>

<hr />


<!-- Add Review Form -->
@if (User.Identity != null && User.Identity.IsAuthenticated)
{
    <h4>Write a Review</h4>

    <form asp-action="AddReview" method="post">
        <input type="hidden" name="productId" value="@Model.Id" />

        <p>
            <label>Rating:</label><br />
            <select name="rating">
                <option value="5">5 - Excellent</option>
                <option value="4">4 - Very Good</option>
                <option value="3">3 - Good</option>
                <option value="2">2 - Fair</option>
                <option value="1">1 - Poor</option>
            </select>
        </p>

        <p>
            <label>Review:</label><br />
            <textarea name="content" rows="3" required></textarea>
        </p>

        <button type="submit">Submit Review</button>
    </form>
}
else
{
    <p>
        Please
        <a asp-area="Identity" asp-page="/Account/Login">login</a>
        to write a review.
    </p>
}
